<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Solve Problem Game</title>
    <link rel="stylesheet" href="style.css">

    <!-- เชื่อมต่อ Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Mali:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;1,200;1,300;1,400;1,500;1,600;1,700&display=swap"
        rel="stylesheet">
    <style>
        body {
            margin: 0;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            background-image: url('background/SolveProblems1.png');
            background-repeat: no-repeat;
            background-attachment: fixed;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            font-family: "Mali", serif;
            color: #333333;
        }
    </style>
</head>

<body>
    <div class="game-container">
        <div class="question">
            <p>พี่หมีอยากไปหาเพื่อนกวางฝั่งตรงข้าม <br>
                ช่วยพาพี่หมีข้ามไปได้ไหม <br>
                เอ~ พี่หมีควรใช้อะไรดี?</p>
        </div>
        <div class="options">
            <div class="option-container">
                <button class="option" data-correct="true">
                    <img src="component\Wood1.png" alt="ท่อนไม้">
                </button>
                <button class="option" data-correct="false">
                    <img src="component\Flashlight1.png" alt="ไฟฉาย">
                </button>
                <button class="option" data-correct="false">
                    <img src="component\Carrot1.png" alt="แครอท">
                </button>
            </div>
        </div>
        <div class="feedback"></div>
        <button id="next-button" style="display: none;">Next</button>
    </div>
    <script src="script.js"></script>

    <script>
        let timer;
        let timeRemaining = 5; // ตั้งค่าเวลานับถอยหลังเป็น 5 วินาที

        function startTimer() {
            // เริ่มจับเวลานับถอยหลัง
            timer = setInterval(function () {
                if (timeRemaining <= 0) {
                    clearInterval(timer); // หยุดจับเวลาเมื่อถึง 0
                    alert("หมดเวลา!");
                } else {
                    timeRemaining--;
                    let minutes = Math.floor(timeRemaining / 60);
                    let seconds = timeRemaining % 60;
                    document.getElementById("timer").innerText =
                        (minutes < 10 ? "0" + minutes : minutes) + ":" +
                        (seconds < 10 ? "0" + seconds : seconds);
                }
            }, 1000); // ทำงานทุกๆ 1 วินาที
        }

        document.querySelectorAll('.option').forEach(button => {
            button.addEventListener('click', () => {
                const isCorrect = button.getAttribute('data-correct') === 'true';
                const feedback = document.querySelector('.feedback');
                const nextButton = document.getElementById('next-button');

                // หยุดเสียงก่อนหน้า (หากกำลังเล่นอยู่)
                const applauseSound = new Audio('reactionsounds/applause.mp3');
                const booSound = new Audio('reactionsounds/boo.mp3');
                applauseSound.pause();
                applauseSound.currentTime = 0;
                booSound.pause();
                booSound.currentTime = 0;

                // ปิดการคลิกตัวเลือกทั้งหมด
                const allOptions = document.querySelectorAll('.option');
                allOptions.forEach(option => option.disabled = true);

                // แสดงข้อความตอบกลับและควบคุมปุ่ม Next
                if (isCorrect) {
                    console.log("ตอบถูก!");
                    feedback.textContent = "คำตอบถูกต้อง!";
                    feedback.style.color = "green";
                    applauseSound.play(); // เล่นเสียง applause.mp3
                    nextButton.style.display = "block"; // แสดงปุ่ม Next
                } else {
                    console.log("ตอบผิด!");
                    feedback.textContent = "คำตอบผิด!";
                    feedback.style.color = "red";
                    booSound.play(); // เล่นเสียง boo.mp3
                    nextButton.style.display = "none"; // ซ่อนปุ่ม Next
                }
            });
        });

        // เมื่อผู้ใช้คลิกปุ่ม Next ให้เปลี่ยนเส้นทางไปยังหน้าใหม่
        document.getElementById('next-button').addEventListener('click', () => {
            const currentUrl = window.location.pathname;

            if (currentUrl.includes('SolveProblem1.html')) {
                window.location.href = "SolveProblem2.html";
            } else if (currentUrl.includes('SolveProblem2.html')) {
                window.location.href = "SolveProblem3.html";
            } else if (currentUrl.includes('SolveProblem3.html')) {
                window.location.href = "Home.html";
            }
        });

        window.onload = startTimer;

    </script>

</body>

</html>